module.exports=[85510,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(50944),f=a.i(23124),g=a.i(8615),h=a.i(57632),i=a.i(46376);function j(){let a=(0,e.useRouter)(),j=(0,f.useAppDispatch)(),{items:k,totalPrice:l,loading:m,isAuthenticated:n}=(0,f.useAppSelector)(a=>a.cart),{addresses:o,selectedAddress:p,loading:q}=(0,f.useAppSelector)(a=>a.address),{loading:r,error:s,currentOrder:t}=(0,f.useAppSelector)(a=>a.order),{isAuthenticated:u,user:v}=(0,f.useAppSelector)(a=>a.auth),[w,x]=(0,c.useState)("cart"),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)("card"),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)({address_type:"home",phone:"",address_line1:"",landmark:"",city:"",postal_code:"",is_default:!1});(0,c.useEffect)(()=>{(async()=>{u?(await j((0,g.fetchCart)()),await j((0,h.fetchAddresses)())):j((0,g.loadLocalCart)())})()},[j,u]),(0,c.useEffect)(()=>{t&&a.push(`/order-confirmation/${t.order_id}`)},[t,a]);let G=async a=>{a.preventDefault();try{await j((0,h.createAddress)(E)).unwrap(),F({address_type:"home",phone:"",address_line1:"",landmark:"",city:"",postal_code:"",is_default:!1}),z(!1)}catch(a){console.error("Failed to add address:",a)}},H=async()=>{if(!p)return void alert("Please select a shipping address");if(0===k.length)return void alert("Your cart is empty");let a={payment_method:A,shipping_address_id:p.address_id,billing_address_id:p.address_id,customer_notes:C};try{await j((0,i.createOrder)(a)).unwrap()}catch(a){console.error("Failed to create order:",a)}},I=k.map(a=>({id:a.product_id||a.id,cart_item_id:a.cart_item_id||`local_${a.product_id||a.id}`,name:a.product_name||a.name,price:a.price,quantity:a.quantity,image:a.image_url||a.image})),J=.18*l,K=l>=5e3?0:100,L=l+J+K;return u?(0,b.jsx)("div",{className:"min-h-screen bg-background py-12 px-4",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"Checkout"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"md:col-span-2 space-y-6",children:["cart"===w&&(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-accent rounded-2xl p-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Order Summary"}),0===I.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("p",{className:"text-foreground/70 mb-4",children:"Your cart is empty"}),(0,b.jsx)("a",{href:"/shop",className:"text-primary hover:underline",children:"Continue Shopping"})]}):(0,b.jsx)("div",{className:"space-y-4",children:I.map(a=>(0,b.jsxs)("div",{className:"flex gap-4 pb-4 border-b border-border last:border-b-0",children:[(0,b.jsx)("img",{src:a.image||"/placeholder.svg",alt:a.name,className:"w-24 h-24 rounded-lg object-cover"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-semibold mb-2",children:a.name}),(0,b.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,b.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,b.jsx)("button",{onClick:()=>{u?j((0,g.updateQuantity)({itemId:a.cart_item_id,quantity:Math.max(1,a.quantity-1)})):j((0,g.updateQuantity)({id:a.id,quantity:Math.max(1,a.quantity-1)}))},className:"px-2 py-1 bg-background rounded hover:bg-primary/10",children:"âˆ’"}),(0,b.jsx)("span",{className:"w-6 text-center",children:a.quantity}),(0,b.jsx)("button",{onClick:()=>{u?j((0,g.updateQuantity)({itemId:a.cart_item_id,quantity:a.quantity+1})):j((0,g.updateQuantity)({id:a.id,quantity:a.quantity+1}))},className:"px-2 py-1 bg-background rounded hover:bg-primary/10",children:"+"})]}),(0,b.jsxs)("span",{className:"text-primary font-semibold",children:["â‚¹",(a.price*a.quantity).toFixed(2)]}),(0,b.jsx)("button",{onClick:()=>{u?j((0,g.clearCartAPI)(a.cart_item_id)):j((0,g.removeFromCart)(a.id))},className:"text-red-500 hover:opacity-70",children:"Remove"})]})]})]},a.cart_item_id))}),I.length>0&&(0,b.jsx)("button",{onClick:()=>x("shipping"),className:"w-full mt-6 py-3 bg-primary text-white rounded-lg font-semibold hover:opacity-90 transition",children:"Continue to Shipping"})]}),"shipping"===w&&(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-accent rounded-2xl p-6 space-y-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Shipping Information"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"Select Shipping Address"}),q?(0,b.jsx)("div",{className:"space-y-4",children:[1,2].map(a=>(0,b.jsxs)("div",{className:"bg-background rounded-lg p-4 animate-pulse",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-300 rounded mb-2 w-3/4"}),(0,b.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/2"})]},a))}):0===o.length?(0,b.jsx)("p",{className:"text-foreground/70 mb-4",children:"No addresses saved"}):(0,b.jsx)("div",{className:"space-y-4",children:o.map(a=>(0,b.jsx)("div",{className:`bg-background rounded-lg p-4 border-2 cursor-pointer transition ${p?.address_id===a.address_id?"border-primary bg-primary/5":"border-transparent hover:border-primary/50"}`,onClick:()=>j((0,h.setSelectedAddress)(a)),children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold capitalize",children:a.address_type}),(0,b.jsx)("p",{className:"text-foreground/80",children:a.address_line1}),(0,b.jsxs)("p",{className:"text-foreground/80",children:[a.landmark&&`${a.landmark}, `,a.city," - ",a.postal_code]}),(0,b.jsxs)("p",{className:"text-foreground/80",children:["Phone: ",a.phone]})]}),a.is_default&&(0,b.jsx)("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-xs",children:"Default"})]})},a.address_id))}),(0,b.jsx)("button",{onClick:()=>z(!0),className:"w-full mt-4 py-3 border-2 border-dashed border-primary text-primary rounded-lg font-semibold hover:bg-primary/10 transition",children:"+ Add New Address"}),y&&(0,b.jsxs)(d.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-6 p-4 bg-background rounded-lg",children:[(0,b.jsx)("h4",{className:"font-semibold mb-4",children:"Add New Address"}),(0,b.jsxs)("form",{onSubmit:G,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("select",{value:E.address_type,onChange:a=>F({...E,address_type:a.target.value}),className:"px-4 py-2 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{value:"home",children:"Home"}),(0,b.jsx)("option",{value:"work",children:"Work"}),(0,b.jsx)("option",{value:"other",children:"Other"})]}),(0,b.jsx)("input",{type:"tel",placeholder:"Phone Number",value:E.phone,onChange:a=>F({...E,phone:a.target.value}),className:"px-4 py-2 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),(0,b.jsx)("input",{type:"text",placeholder:"Address Line 1",value:E.address_line1,onChange:a=>F({...E,address_line1:a.target.value}),className:"w-full px-4 py-2 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary",required:!0}),(0,b.jsx)("input",{type:"text",placeholder:"Landmark (Optional)",value:E.landmark,onChange:a=>F({...E,landmark:a.target.value}),className:"w-full px-4 py-2 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)("input",{type:"text",placeholder:"City",value:E.city,onChange:a=>F({...E,city:a.target.value}),className:"px-4 py-2 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary",required:!0}),(0,b.jsx)("input",{type:"text",placeholder:"Postal Code",value:E.postal_code,onChange:a=>F({...E,postal_code:a.target.value}),className:"px-4 py-2 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:E.is_default,onChange:a=>F({...E,is_default:a.target.checked}),className:"w-4 h-4 accent-primary"}),(0,b.jsx)("span",{children:"Set as default address"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-primary text-white rounded-lg font-semibold hover:opacity-90 transition",children:"Save Address"}),(0,b.jsx)("button",{type:"button",onClick:()=>z(!1),className:"flex-1 py-2 border border-primary text-primary rounded-lg font-semibold hover:bg-primary/10 transition",children:"Cancel"})]})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{onClick:()=>x("cart"),className:"flex-1 py-3 border border-primary text-primary rounded-lg font-semibold hover:bg-primary/10 transition",children:"Back to Cart"}),(0,b.jsx)("button",{onClick:()=>x("payment"),disabled:!p,className:"flex-1 py-3 bg-primary text-white rounded-lg font-semibold hover:opacity-90 transition disabled:opacity-50",children:"Continue to Payment"})]})]}),"payment"===w&&(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-accent rounded-2xl p-6 space-y-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Payment Information"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"Select Payment Method"}),(0,b.jsx)("div",{className:"space-y-3",children:[{id:"card",label:"Credit/Debit Card",icon:"ðŸ’³"},{id:"paypal",label:"PayPal",icon:"ðŸ”µ"},{id:"upi",label:"UPI",icon:"ðŸ“±"},{id:"cod",label:"Cash on Delivery",icon:"ðŸ’°"}].map(a=>(0,b.jsxs)("label",{className:`flex items-center gap-4 p-4 bg-background rounded-lg border-2 cursor-pointer transition ${A===a.id?"border-primary bg-primary/5":"border-transparent hover:border-primary/50"}`,children:[(0,b.jsx)("input",{type:"radio",name:"payment",value:a.id,checked:A===a.id,onChange:a=>B(a.target.value),className:"w-4 h-4 accent-primary"}),(0,b.jsx)("span",{className:"text-2xl",children:a.icon}),(0,b.jsx)("span",{className:"font-medium",children:a.label})]},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"Additional Notes (Optional)"}),(0,b.jsx)("textarea",{value:C,onChange:a=>D(a.target.value),placeholder:"Any special instructions for your order...",className:"w-full px-4 py-3 bg-background rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary resize-none",rows:"3"})]}),s&&(0,b.jsx)("div",{className:"bg-red-500/10 border border-red-500 text-red-500 rounded-lg p-4",children:s}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{onClick:()=>x("shipping"),className:"flex-1 py-3 border border-primary text-primary rounded-lg font-semibold hover:bg-primary/10 transition",children:"Back to Shipping"}),(0,b.jsx)("button",{onClick:H,disabled:r||0===k.length,className:"flex-1 py-3 bg-primary text-white rounded-lg font-semibold hover:opacity-90 transition disabled:opacity-50",children:r?"Placing Order...":"Place Order"})]})]})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-accent rounded-2xl p-6 h-fit sticky top-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Order Summary"}),(0,b.jsx)("div",{className:"space-y-3 mb-4",children:I.map(a=>(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsxs)("span",{className:"flex-1 truncate",children:[a.name," Ã— ",a.quantity]}),(0,b.jsxs)("span",{className:"ml-2 font-medium",children:["â‚¹",(a.price*a.quantity).toFixed(2)]})]},a.cart_item_id))}),(0,b.jsxs)("div",{className:"space-y-2 pb-4 border-b border-border",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Subtotal"}),(0,b.jsxs)("span",{children:["â‚¹",l.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Shipping"}),(0,b.jsx)("span",{children:0===K?"Free":`â‚¹${K.toFixed(2)}`})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Tax (18%)"}),(0,b.jsxs)("span",{children:["â‚¹",J.toFixed(2)]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-4 text-primary",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsxs)("span",{children:["â‚¹",L.toFixed(2)]})]})]})]})]})}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Please Login to Checkout"}),(0,b.jsx)("a",{href:"/login",className:"text-primary hover:underline",children:"Sign in to your account"})]})})}a.s(["default",()=>j])}];

//# sourceMappingURL=app_checkout_page_jsx_fa8590f2._.js.map