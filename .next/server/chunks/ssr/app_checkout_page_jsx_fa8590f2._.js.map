{"version":3,"sources":["../../../../app/checkout/page.jsx"],"sourcesContent":["// app/checkout/page.jsx - Fix the useEffect for cart loading\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { useRouter } from 'next/navigation';\nimport { useAppSelector, useAppDispatch } from '@/redux/hooks';\nimport { \n  fetchCart, \n  clearCartAPI,\n  removeFromCart,\n  updateQuantity,\n  loadLocalCart \n} from '@/redux/slices/cartSlice';\nimport { \n  fetchAddresses, \n  createAddress,\n  setSelectedAddress \n} from '@/redux/slices/addressSlice';\nimport { createOrder } from '@/redux/slices/orderSlice';\n\nexport default function CheckoutPage() {\n  const router = useRouter();\n  const dispatch = useAppDispatch();\n  \n  const { items, totalPrice, loading: cartLoading, isAuthenticated: cartAuthenticated } = useAppSelector(state => state.cart);\n  const { addresses, selectedAddress, loading: addressLoading } = useAppSelector(state => state.address);\n  const { loading: orderLoading, error: orderError, currentOrder } = useAppSelector(state => state.order);\n  const { isAuthenticated, user } = useAppSelector(state => state.auth);\n\n  // Local states\n  const [step, setStep] = useState('cart');\n  const [showAddressForm, setShowAddressForm] = useState(false);\n  const [paymentMethod, setPaymentMethod] = useState('card');\n  const [customerNotes, setCustomerNotes] = useState('');\n  const [newAddress, setNewAddress] = useState({\n    address_type: 'home',\n    phone: '',\n    address_line1: '',\n    landmark: '',\n    city: '',\n    postal_code: '',\n    is_default: false\n  });\n\n useEffect(() => {\n    const loadCartData = async () => {\n      if (isAuthenticated) {\n        // For authenticated users, fetch from API\n        await dispatch(fetchCart());\n        await dispatch(fetchAddresses());\n      } else {\n        // For non-authenticated users, load from local storage\n        dispatch(loadLocalCart());\n      }\n    };\n\n    loadCartData();\n  }, [dispatch, isAuthenticated]);\n\n  // Redirect if order is successfully created\n  useEffect(() => {\n    if (currentOrder) {\n      router.push(`/order-confirmation/${currentOrder.order_id}`);\n    }\n  }, [currentOrder, router]);\n\n  // Handle address form submission\n  const handleAddAddress = async (e) => {\n    e.preventDefault();\n    try {\n      await dispatch(createAddress(newAddress)).unwrap();\n      setNewAddress({\n        address_type: 'home',\n        phone: '',\n        address_line1: '',\n        landmark: '',\n        city: '',\n        postal_code: '',\n        is_default: false\n      });\n      setShowAddressForm(false);\n    } catch (error) {\n      console.error('Failed to add address:', error);\n    }\n  };\n\n  // Handle order creation\n  const handlePlaceOrder = async () => {\n    if (!selectedAddress) {\n      alert('Please select a shipping address');\n      return;\n    }\n\n    if (items.length === 0) {\n      alert('Your cart is empty');\n      return;\n    }\n\n    const orderData = {\n      payment_method: paymentMethod,\n      shipping_address_id: selectedAddress.address_id,\n      billing_address_id: selectedAddress.address_id,\n      customer_notes: customerNotes\n    };\n\n    try {\n      await dispatch(createOrder(orderData)).unwrap();\n      // Cart will be cleared automatically by the backend when order is created\n    } catch (error) {\n      console.error('Failed to create order:', error);\n    }\n  };\nconst displayItems = items.map(item => {\n    // Ensure consistent property names between API and local storage\n    return {\n      id: item.product_id || item.id,\n      cart_item_id: item.cart_item_id || `local_${item.product_id || item.id}`,\n      name: item.product_name || item.name,\n      price: item.price,\n      quantity: item.quantity,\n      image: item.image_url || item.image\n    };\n  });\n  // Calculate order totals\n  const taxAmount = totalPrice * 0.18; // 18% tax\n  const shippingAmount = totalPrice >= 5000 ? 0 : 100;\n  const finalTotal = totalPrice + taxAmount + shippingAmount;\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold mb-4\">Please Login to Checkout</h2>\n          <a href=\"/login\" className=\"text-primary hover:underline\">\n            Sign in to your account\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background py-12 px-4\">\n      <div className=\"max-w-6xl mx-auto\">\n        <h1 className=\"text-4xl font-bold mb-8\">Checkout</h1>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n          {/* Main Content */}\n          <div className=\"md:col-span-2 space-y-6\">\n            {/* Step 1: Cart Review */}\n            {step === 'cart' && (\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"bg-accent rounded-2xl p-6\"\n              >\n                <h2 className=\"text-2xl font-bold mb-6\">Order Summary</h2>\n\n                {displayItems.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <p className=\"text-foreground/70 mb-4\">Your cart is empty</p>\n                    <a href=\"/shop\" className=\"text-primary hover:underline\">\n                      Continue Shopping\n                    </a>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {displayItems.map(item => (\n                      <div\n                        key={item.cart_item_id}\n                        className=\"flex gap-4 pb-4 border-b border-border last:border-b-0\"\n                      >\n                        <img\n                          src={item.image || \"/placeholder.svg\"}\n                          alt={item.name}\n                          className=\"w-24 h-24 rounded-lg object-cover\"\n                        />\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-semibold mb-2\">{item.name}</h4>\n                          <div className=\"flex gap-4 items-end\">\n                            <div className=\"flex gap-2 items-center\">\n                              <button\n                                onClick={() => {\n                                  if (isAuthenticated) {\n                                    // Use API for authenticated users\n                                    dispatch(updateQuantity({ \n                                      itemId: item.cart_item_id, \n                                      quantity: Math.max(1, item.quantity - 1) \n                                    }));\n                                  } else {\n                                    // Use local for non-authenticated users\n                                    dispatch(updateQuantity({ \n                                      id: item.id, \n                                      quantity: Math.max(1, item.quantity - 1) \n                                    }));\n                                  }\n                                }}\n                                className=\"px-2 py-1 bg-background rounded hover:bg-primary/10\"\n                              >\n                                âˆ’\n                              </button>\n                              <span className=\"w-6 text-center\">{item.quantity}</span>\n                              <button\n                                onClick={() => {\n                                  if (isAuthenticated) {\n                                    dispatch(updateQuantity({ \n                                      itemId: item.cart_item_id, \n                                      quantity: item.quantity + 1 \n                                    }));\n                                  } else {\n                                    dispatch(updateQuantity({ \n                                      id: item.id, \n                                      quantity: item.quantity + 1 \n                                    }));\n                                  }\n                                }}\n                                className=\"px-2 py-1 bg-background rounded hover:bg-primary/10\"\n                              >\n                                +\n                              </button>\n                            </div>\n                            <span className=\"text-primary font-semibold\">\n                              â‚¹{(item.price * item.quantity).toFixed(2)}\n                            </span>\n                            <button\n                              onClick={() => {\n                                if (isAuthenticated) {\n                                  dispatch(clearCartAPI(item.cart_item_id));\n                                } else {\n                                  dispatch(removeFromCart(item.id));\n                                }\n                              }}\n                              className=\"text-red-500 hover:opacity-70\"\n                            >\n                              Remove\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {displayItems.length > 0 && (\n                  <button\n                    onClick={() => setStep('shipping')}\n                    className=\"w-full mt-6 py-3 bg-primary text-white rounded-lg font-semibold hover:opacity-90 transition\"\n                  >\n                    Continue to Shipping\n                  </button>\n                )}\n              </motion.div>\n            )}\n\n            {/* Step 2: Shipping Address */}\n            {step === 'shipping' && (\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"bg-accent rounded-2xl p-6 space-y-6\"\n              >\n                <h2 className=\"text-2xl font-bold\">Shipping Information</h2>\n\n                {/* Address Selection */}\n                <div>\n                  <h3 className=\"font-semibold mb-4\">Select Shipping Address</h3>\n                  \n                  {addressLoading ? (\n                    <div className=\"space-y-4\">\n                      {[1, 2].map(i => (\n                        <div key={i} className=\"bg-background rounded-lg p-4 animate-pulse\">\n                          <div className=\"h-4 bg-gray-300 rounded mb-2 w-3/4\"></div>\n                          <div className=\"h-4 bg-gray-300 rounded w-1/2\"></div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : addresses.length === 0 ? (\n                    <p className=\"text-foreground/70 mb-4\">No addresses saved</p>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      {addresses.map(address => (\n                        <div\n                          key={address.address_id}\n                          className={`bg-background rounded-lg p-4 border-2 cursor-pointer transition ${\n                            selectedAddress?.address_id === address.address_id\n                              ? 'border-primary bg-primary/5'\n                              : 'border-transparent hover:border-primary/50'\n                          }`}\n                          onClick={() => dispatch(setSelectedAddress(address))}\n                        >\n                          <div className=\"flex justify-between items-start\">\n                            <div>\n                              <p className=\"font-semibold capitalize\">{address.address_type}</p>\n                              <p className=\"text-foreground/80\">{address.address_line1}</p>\n                              <p className=\"text-foreground/80\">\n                                {address.landmark && `${address.landmark}, `}\n                                {address.city} - {address.postal_code}\n                              </p>\n                              <p className=\"text-foreground/80\">Phone: {address.phone}</p>\n                            </div>\n                            {address.is_default && (\n                              <span className=\"bg-green-500 text-white px-2 py-1 rounded text-xs\">\n                                Default\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n\n                  {/* Add New Address Button */}\n                  <button\n                    onClick={() => setShowAddressForm(true)}\n                    className=\"w-full mt-4 py-3 border-2 border-dashed border-primary text-primary rounded-lg font-semibold hover:bg-primary/10 transition\"\n                  >\n                    + Add New Address\n                  </button>\n\n                  {/* New Address Form */}\n                  {showAddressForm && (\n                    <motion.div\n                      initial={{ opacity: 0, height: 0 }}\n                      animate={{ opacity: 1, height: 'auto' }}\n                      className=\"mt-6 p-4 bg-background rounded-lg\"\n                    >\n                      <h4 className=\"font-semibold mb-4\">Add New Address</h4>\n                      <form onSubmit={handleAddAddress} className=\"space-y-4\">\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <select\n                            value={newAddress.address_type}\n                            onChange={(e) => setNewAddress({ ...newAddress, address_type: e.target.value })}\n                            className=\"px-4 py-2 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary\"\n                          >\n                            <option value=\"home\">Home</option>\n                            <option value=\"work\">Work</option>\n                            <option value=\"other\">Other</option>\n                          </select>\n                          \n                          <input\n                            type=\"tel\"\n                            placeholder=\"Phone Number\"\n                            value={newAddress.phone}\n                            onChange={(e) => setNewAddress({ ...newAddress, phone: e.target.value })}\n                            className=\"px-4 py-2 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary\"\n                            required\n                          />\n                        </div>\n\n                        <input\n                          type=\"text\"\n                          placeholder=\"Address Line 1\"\n                          value={newAddress.address_line1}\n                          onChange={(e) => setNewAddress({ ...newAddress, address_line1: e.target.value })}\n                          className=\"w-full px-4 py-2 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary\"\n                          required\n                        />\n\n                        <input\n                          type=\"text\"\n                          placeholder=\"Landmark (Optional)\"\n                          value={newAddress.landmark}\n                          onChange={(e) => setNewAddress({ ...newAddress, landmark: e.target.value })}\n                          className=\"w-full px-4 py-2 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary\"\n                        />\n\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <input\n                            type=\"text\"\n                            placeholder=\"City\"\n                            value={newAddress.city}\n                            onChange={(e) => setNewAddress({ ...newAddress, city: e.target.value })}\n                            className=\"px-4 py-2 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary\"\n                            required\n                          />\n                          \n                          <input\n                            type=\"text\"\n                            placeholder=\"Postal Code\"\n                            value={newAddress.postal_code}\n                            onChange={(e) => setNewAddress({ ...newAddress, postal_code: e.target.value })}\n                            className=\"px-4 py-2 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary\"\n                            required\n                          />\n                        </div>\n\n                        <label className=\"flex items-center gap-2\">\n                          <input\n                            type=\"checkbox\"\n                            checked={newAddress.is_default}\n                            onChange={(e) => setNewAddress({ ...newAddress, is_default: e.target.checked })}\n                            className=\"w-4 h-4 accent-primary\"\n                          />\n                          <span>Set as default address</span>\n                        </label>\n\n                        <div className=\"flex gap-3\">\n                          <button\n                            type=\"submit\"\n                            className=\"flex-1 py-2 bg-primary text-white rounded-lg font-semibold hover:opacity-90 transition\"\n                          >\n                            Save Address\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setShowAddressForm(false)}\n                            className=\"flex-1 py-2 border border-primary text-primary rounded-lg font-semibold hover:bg-primary/10 transition\"\n                          >\n                            Cancel\n                          </button>\n                        </div>\n                      </form>\n                    </motion.div>\n                  )}\n                </div>\n\n                {/* Navigation Buttons */}\n                <div className=\"flex gap-4\">\n                  <button\n                    onClick={() => setStep('cart')}\n                    className=\"flex-1 py-3 border border-primary text-primary rounded-lg font-semibold hover:bg-primary/10 transition\"\n                  >\n                    Back to Cart\n                  </button>\n                  <button\n                    onClick={() => setStep('payment')}\n                    disabled={!selectedAddress}\n                    className=\"flex-1 py-3 bg-primary text-white rounded-lg font-semibold hover:opacity-90 transition disabled:opacity-50\"\n                  >\n                    Continue to Payment\n                  </button>\n                </div>\n              </motion.div>\n            )}\n\n            {/* Step 3: Payment */}\n            {step === 'payment' && (\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"bg-accent rounded-2xl p-6 space-y-6\"\n              >\n                <h2 className=\"text-2xl font-bold\">Payment Information</h2>\n\n                {/* Payment Method Selection */}\n                <div>\n                  <h3 className=\"font-semibold mb-4\">Select Payment Method</h3>\n                  <div className=\"space-y-3\">\n                    {[\n                      { id: 'card', label: 'Credit/Debit Card', icon: 'ðŸ’³' },\n                      { id: 'paypal', label: 'PayPal', icon: 'ðŸ”µ' },\n                      { id: 'upi', label: 'UPI', icon: 'ðŸ“±' },\n                      { id: 'cod', label: 'Cash on Delivery', icon: 'ðŸ’°' },\n                    ].map(method => (\n                      <label\n                        key={method.id}\n                        className={`flex items-center gap-4 p-4 bg-background rounded-lg border-2 cursor-pointer transition ${\n                          paymentMethod === method.id\n                            ? 'border-primary bg-primary/5'\n                            : 'border-transparent hover:border-primary/50'\n                        }`}\n                      >\n                        <input\n                          type=\"radio\"\n                          name=\"payment\"\n                          value={method.id}\n                          checked={paymentMethod === method.id}\n                          onChange={(e) => setPaymentMethod(e.target.value)}\n                          className=\"w-4 h-4 accent-primary\"\n                        />\n                        <span className=\"text-2xl\">{method.icon}</span>\n                        <span className=\"font-medium\">{method.label}</span>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Customer Notes */}\n                <div>\n                  <h3 className=\"font-semibold mb-4\">Additional Notes (Optional)</h3>\n                  <textarea\n                    value={customerNotes}\n                    onChange={(e) => setCustomerNotes(e.target.value)}\n                    placeholder=\"Any special instructions for your order...\"\n                    className=\"w-full px-4 py-3 bg-background rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary resize-none\"\n                    rows=\"3\"\n                  />\n                </div>\n\n                {/* Order Error */}\n                {orderError && (\n                  <div className=\"bg-red-500/10 border border-red-500 text-red-500 rounded-lg p-4\">\n                    {orderError}\n                  </div>\n                )}\n\n                {/* Navigation Buttons */}\n                <div className=\"flex gap-4\">\n                  <button\n                    onClick={() => setStep('shipping')}\n                    className=\"flex-1 py-3 border border-primary text-primary rounded-lg font-semibold hover:bg-primary/10 transition\"\n                  >\n                    Back to Shipping\n                  </button>\n                  <button\n                    onClick={handlePlaceOrder}\n                    disabled={orderLoading || items.length === 0}\n                    className=\"flex-1 py-3 bg-primary text-white rounded-lg font-semibold hover:opacity-90 transition disabled:opacity-50\"\n                  >\n                    {orderLoading ? 'Placing Order...' : 'Place Order'}\n                  </button>\n                </div>\n              </motion.div>\n            )}\n          </div>\n\n          {/* Order Summary Sidebar */}\n           <motion.div\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            className=\"bg-accent rounded-2xl p-6 h-fit sticky top-6\"\n          >\n            <h3 className=\"text-xl font-bold mb-4\">Order Summary</h3>\n            \n            {/* Items List */}\n            <div className=\"space-y-3 mb-4\">\n              {displayItems.map(item => (\n                <div key={item.cart_item_id} className=\"flex justify-between text-sm\">\n                  <span className=\"flex-1 truncate\">\n                    {item.name} Ã— {item.quantity}\n                  </span>\n                  <span className=\"ml-2 font-medium\">\n                    â‚¹{(item.price * item.quantity).toFixed(2)}\n                  </span>\n                </div>\n              ))}\n            </div>\n\n            {/* Totals */}\n            <div className=\"space-y-2 pb-4 border-b border-border\">\n              <div className=\"flex justify-between\">\n                <span>Subtotal</span>\n                <span>â‚¹{totalPrice.toFixed(2)}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Shipping</span>\n                <span>{shippingAmount === 0 ? 'Free' : `â‚¹${shippingAmount.toFixed(2)}`}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Tax (18%)</span>\n                <span>â‚¹{taxAmount.toFixed(2)}</span>\n              </div>\n            </div>\n            \n            {/* Final Total */}\n            <div className=\"flex justify-between text-lg font-bold pt-4 text-primary\">\n              <span>Total</span>\n              <span>â‚¹{finalTotal.toFixed(2)}</span>\n            </div>\n          </motion.div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}