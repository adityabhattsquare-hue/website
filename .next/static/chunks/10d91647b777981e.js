(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69093,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return d}});let r=e.r(43476),a=e.r(71645),i=e.r(67585),l=e.r(52157);function n(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},s=(0,a.lazy)(()=>t.loader().then(n)),d=t.loading;function c(e){let n=d?(0,r.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,c=o?a.Suspense:a.Fragment,x=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(l.PreloadChunks,{moduleIds:t.modules}):null,(0,r.jsx)(s,{...e})]}):(0,r.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(s,{...e})});return(0,r.jsx)(c,{...o?{fallback:n}:{},children:x})}return c.displayName="LoadableComponent",c}},70703,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return a}});let r=e.r(55682)._(e.r(69093));function a(e,t){let s={};"function"==typeof e&&(s.loader=e);let a={...s,...t};return(0,r.default)({...a,modules:a.loadableGenerated?.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},11728,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(46932),i=e.i(70703),l=e.i(59492),n=e.i(21128),o=e.i(38563),d=e.i(9906);let c=(0,i.default)(()=>e.A(41881),{loadableGenerated:{modules:[38377]}});function x(){let e=(0,r.useParams)().id,[i,x]=(0,s.useState)(1),[m,u]=(0,s.useState)(0),[p,h]=(0,s.useState)(!1),[f,g]=(0,s.useState)([]),j=(0,l.useAppDispatch)(),{selectedProduct:b,loading:y,error:N}=(0,l.useAppSelector)(e=>e.products),{isAuthenticated:v,user:w}=(0,l.useAppSelector)(e=>e.auth);(0,s.useEffect)(()=>{e&&j((0,d.getProductById)(e))},[j,e]),(0,s.useEffect)(()=>{b&&b.reviews&&g(b.reviews)},[b]);let _=async t=>{if(t.preventDefault(),!v)return void alert("Please login to submit a review");let s=new FormData(t.target),r={rating:parseInt(s.get("rating")),comment:s.get("review"),userName:w?.name||"Anonymous",userId:w?.id,productId:e};try{let e={id:Date.now().toString(),name:w?.name||"You",text:r.comment,rating:r.rating,date:new Date().toISOString()};g(t=>[e,...t]),h(!1),t.target.reset()}catch(e){console.error("Failed to submit review:",e),alert("Failed to submit review. Please try again.")}};if(y)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-foreground/70",children:"Loading product..."})]})}),(0,t.jsx)(c,{})]});if(N)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-2xl text-red-500 mb-4",children:"Error loading product"}),(0,t.jsx)("p",{className:"text-foreground/70",children:N})]})}),(0,t.jsx)(c,{})]});if(!b)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-2xl text-foreground/70",children:"Product not found"})}),(0,t.jsx)(c,{})]});let k=b.images||[],S=k[m]?.image_url||"/placeholder.svg";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"min-h-screen bg-background py-12 px-4",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsx)("nav",{className:"flex mb-8","aria-label":"Breadcrumb",children:(0,t.jsxs)("ol",{className:"flex items-center space-x-2 text-sm",children:[(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/",className:"text-foreground/60 hover:text-foreground",children:"Home"})}),(0,t.jsxs)("li",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground/30 mx-2",children:"/"}),(0,t.jsx)("a",{href:"/shop",className:"text-foreground/60 hover:text-foreground",children:"Products"})]}),(0,t.jsxs)("li",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground/30 mx-2",children:"/"}),(0,t.jsx)("span",{className:"text-foreground",children:b.product_name})]})]})}),(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-12",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"bg-accent rounded-2xl overflow-hidden h-96 flex items-center justify-center",children:(0,t.jsx)(a.motion.img,{src:S,alt:b.product_name,className:"w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}},m)}),k.length>1&&(0,t.jsx)("div",{className:"grid grid-cols-4 gap-4",children:k.map((e,s)=>(0,t.jsx)("button",{onClick:()=>u(s),className:`bg-accent rounded-lg overflow-hidden border-2 ${m===s?"border-primary":"border-transparent"}`,children:(0,t.jsx)("img",{src:e.image_url,alt:`${b.product_name} ${s+1}`,className:"w-full h-20 object-cover"})},e.image_id))})]}),(0,t.jsxs)(a.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[b.is_featured&&(0,t.jsx)("span",{className:"bg-blue-500 text-white px-3 py-1 rounded-full text-sm",children:"Featured"}),b.is_bestseller&&(0,t.jsx)("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm",children:"Bestseller"}),b.is_new_arrival&&(0,t.jsx)("span",{className:"bg-purple-500 text-white px-3 py-1 rounded-full text-sm",children:"New Arrival"}),b.is_on_sale&&(0,t.jsx)("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm",children:"On Sale"})]}),(0,t.jsx)("h1",{className:"text-4xl font-bold text-foreground",children:b.product_name}),b.category_name&&(0,t.jsxs)("p",{className:"text-foreground/60",children:["Category: ",(0,t.jsx)("span",{className:"text-foreground",children:b.category_name})]}),(0,t.jsxs)("p",{className:"text-foreground/60",children:["SKU: ",(0,t.jsx)("span",{className:"text-foreground",children:b.sku})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex text-yellow-400",children:["★".repeat(4),"☆".repeat(1)]}),(0,t.jsx)("span",{className:"text-foreground/60",children:"(4.5)"}),(0,t.jsxs)("span",{className:"text-foreground/60",children:["(",f.length," reviews)"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"text-3xl font-bold text-primary",children:["$",b.price]}),b.compare_price&&b.compare_price>b.price&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"text-xl text-foreground/50 line-through",children:["$",b.compare_price]}),(0,t.jsxs)("span",{className:"bg-red-500 text-white px-2 py-1 rounded text-sm",children:["Save $",(b.compare_price-b.price).toFixed(2)]})]})]}),(0,t.jsx)("div",{className:`text-sm ${b.stock_quantity>0?"text-green-600":"text-red-600"}`,children:b.stock_quantity>0?`In Stock (${b.stock_quantity} available)`:"Out of Stock"}),b.short_description&&(0,t.jsx)("p",{className:"text-foreground/70 text-lg leading-relaxed",children:b.short_description}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-foreground/10",children:[b.material&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-foreground/60 block text-sm",children:"Material:"}),(0,t.jsx)("p",{className:"text-foreground",children:b.material})]}),b.color&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-foreground/60 block text-sm",children:"Color:"}),(0,t.jsx)("p",{className:"text-foreground",children:b.color})]}),b.dimensions&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-foreground/60 block text-sm",children:"Dimensions:"}),(0,t.jsx)("p",{className:"text-foreground",children:b.dimensions})]}),b.weight&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-foreground/60 block text-sm",children:"Weight:"}),(0,t.jsxs)("p",{className:"text-foreground",children:[b.weight," kg"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 pt-4 border-t border-foreground/10",children:[(0,t.jsx)("span",{className:"text-foreground font-medium",children:"Quantity:"}),(0,t.jsxs)("div",{className:"flex items-center border border-foreground/20 rounded-lg",children:[(0,t.jsx)("button",{onClick:()=>x(Math.max(1,i-1)),disabled:i<=1,className:"px-4 py-2 text-foreground/60 hover:text-foreground disabled:opacity-30 transition",children:"−"}),(0,t.jsx)("span",{className:"px-4 py-2 min-w-12 text-center font-semibold",children:i}),(0,t.jsx)("button",{onClick:()=>x(i+1),disabled:i>=(b.stock_quantity||10),className:"px-4 py-2 text-foreground/60 hover:text-foreground disabled:opacity-30 transition",children:"+"})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,t.jsx)(a.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{b&&j((0,n.addToCart)({id:b.product_id,name:b.product_name,price:b.price,image:b.images?.[0]?.image_url||"/placeholder.svg",quantity:i}))},disabled:!b.stock_quantity||0===b.stock_quantity,className:"flex-1 py-4 bg-primary text-white rounded-lg font-semibold hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed",children:b.stock_quantity&&0!==b.stock_quantity?"Add to Cart":"Out of Stock"}),(0,t.jsx)(a.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{b&&j((0,o.addToWishlist)({id:b.product_id,name:b.product_name,price:b.price,image:b.images?.[0]?.image_url||"/placeholder.svg"}))},className:"flex-1 py-4 border-2 border-primary text-primary rounded-lg font-semibold hover:bg-primary/10 transition",children:"Add to Wishlist"})]})]})]}),b.description&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"bg-accent rounded-2xl p-8 mb-12",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Product Description"}),(0,t.jsx)("div",{className:"prose max-w-none",children:(0,t.jsx)("p",{className:"text-foreground/80 leading-relaxed whitespace-pre-line",children:b.description})})]}),(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"bg-accent rounded-2xl p-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Customer Reviews"}),v&&(0,t.jsx)("button",{onClick:()=>h(!0),className:"px-6 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition",children:"Write Review"})]}),0===f.length?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-foreground/60",children:"No reviews yet. Be the first to review this product!"})}):(0,t.jsx)("div",{className:"space-y-6",children:f.map((e,s)=>(0,t.jsxs)("div",{className:"border-t border-border pt-6 first:border-t-0 first:pt-0",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold",children:e.name}),e.date&&(0,t.jsx)("p",{className:"text-sm text-foreground/60",children:new Date(e.date).toLocaleDateString()})]}),(0,t.jsx)("span",{className:"text-yellow-400 text-lg",children:"⭐".repeat(e.rating)})]}),(0,t.jsx)("p",{className:"text-foreground/70 leading-relaxed",children:e.text||e.comment})]},e.id||s))}),p&&(0,t.jsx)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},onClick:()=>h(!1),className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(a.motion.div,{initial:{scale:.9},animate:{scale:1},onClick:e=>e.stopPropagation(),className:"bg-background rounded-2xl p-6 max-w-md w-full",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold mb-4",children:"Write a Review"}),(0,t.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Rating"}),(0,t.jsxs)("select",{name:"rating",defaultValue:"5",className:"w-full px-4 py-2 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary",required:!0,children:[(0,t.jsx)("option",{value:"5",children:"⭐⭐⭐⭐⭐ 5 Stars"}),(0,t.jsx)("option",{value:"4",children:"⭐⭐⭐⭐ 4 Stars"}),(0,t.jsx)("option",{value:"3",children:"⭐⭐⭐ 3 Stars"}),(0,t.jsx)("option",{value:"2",children:"⭐⭐ 2 Stars"}),(0,t.jsx)("option",{value:"1",children:"⭐ 1 Star"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Your Review"}),(0,t.jsx)("textarea",{name:"review",required:!0,className:"w-full px-4 py-3 bg-accent rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary",rows:"4",placeholder:"Share your experience with this product...",minLength:"10"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-primary text-white rounded-lg font-semibold hover:opacity-90 transition",children:"Submit Review"}),(0,t.jsx)("button",{type:"button",onClick:()=>h(!1),className:"flex-1 py-2 border border-primary text-primary rounded-lg font-semibold hover:bg-primary/10 transition",children:"Cancel"})]})]})]})})]})]})}),(0,t.jsx)(c,{})]})}e.s(["default",()=>x])},41881,e=>{e.v(t=>Promise.all(["static/chunks/1fd766c21571a459.js"].map(t=>e.l(t))).then(()=>t(38377)))}]);